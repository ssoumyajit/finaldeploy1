(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{541:function(t,e,n){"use strict";n.r(e);n(11),n(7),n(129),n(5),n(4),n(6),n(59);var o=n(16),r=(n(56),n(223),n(0)),l=n(429),c=n(47);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var h={middleware:"check_auth",components:{Slider:l.a,SliderItem:l.b},created:function(){this.$store.state.editing_obj&&(this.journey=Object.assign({},this.$store.getters.editing_obj),this.imageData1=this.journey.jophoto1,this.imageData2=this.journey.jophoto2,this.imageData3=this.journey.jophoto3,this.imageData4=this.journey.jophoto4,this.imageData5=this.journey.jophoto5,this.journey.ishighlight?this.journey.ishighlight=!0:this.journey.ishighlight=!1,this.journey.isprivate?this.journey.isprivate=!0:this.journey.isprivate=!1,this.journey.isevent?this.journey.isevent=!0:this.journey.isevent=!1)},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)(["editing_obj"])),data:function(){return{journey:{username:this.$store.state.auth.user.user.username,jocontent:"",joevent:"",jodate:"",jophoto1:"",jophoto2:"",jophoto3:"",jophoto4:"",jophoto5:"",jolink:"",ishighlight:!1,isprivate:!1},progressbar:!1,date:"",slide:null,imageData1:"",imageData2:"",imageData3:"",imageData4:"",imageData5:"",e6:1,linkError:"",model:"",valid_snackbar:!1}},methods:{checkLink:function(){var t=this.journey.jolink;if(t)if(!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(this.journey.jolink)){var e=t.startsWith("http");console.log("checkStartsHttp",e),e||(console.log("doesn't start with http"),console.log("url",this.journey.jolink),this.journey.jolink="http://"+this.journey.jolink,console.log("url",this.journey.jolink),this.linkError="")}else this.linkError="Enter a valid URL."},goback:function(){this.$store.dispatch("remove_editing_obj"),window.history.back()},onPick:function(t){switch(t){case 1:this.$refs.fileInput1.click();break;case 2:this.$refs.fileInput2.click();break;case 3:this.$refs.fileInput3.click();break;case 4:this.$refs.fileInput4.click();break;case 5:this.$refs.fileInput5.click()}},removeImage:function(t){switch(t){case 1:this.imageData1="",this.journey.jophoto1="";break;case 2:this.imageData2="",this.journey.jophoto2="";break;case 3:this.imageData3="",this.journey.jophoto3="";break;case 4:this.imageData4="",this.journey.jophoto4="";break;case 5:this.imageData5="",this.journey.jophoto5=""}},onFileChange1:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(t){e.imageData1=t.target.result},o.readAsDataURL(n[0]),this.journey.jophoto1=n[0]}},onFileChange2:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(t){e.imageData2=t.target.result},o.readAsDataURL(n[0]),this.journey.jophoto2=n[0]}},onFileChange3:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(t){e.imageData3=t.target.result},o.readAsDataURL(n[0]),this.journey.jophoto3=n[0]}},onFileChange4:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(t){e.imageData4=t.target.result},o.readAsDataURL(n[0]),this.journey.jophoto4=n[0]}},onFileChange5:function(t){var e=this,n=t.target.files||t.dataTransfer.files;if(n){var o=new FileReader;o.onload=function(t){e.imageData5=t.target.result},o.readAsDataURL(n[0]),this.journey.jophoto5=n[0]}},openlink:function(){var t=this.journey.jolink;window.open(t,"_blank").focus()},refresh:function(){this.date="",this.imageData1="",this.imageData2="",this.imageData3="",this.imageData4="",this.imageData5="",this.journey.username=this.$store.state.auth.user.user.username,this.journey.jocontent="",this.journey.joevent="",this.journey.jodate="",this.journey.jophoto1=null,this.journey.jophoto2=null,this.journey.jophoto3=null,this.journey.jophoto4=null,this.journey.jophoto5=null,this.journey.jolink="",this.journey.ishighlight=!1,this.journey.isprivate=!1},submit:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==t.journey.joevent||!t.journey.jophoto1){e.next=22;break}for(data in t.progressbar=!0,n={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+t.$store.state.auth.user.access_token}},o=new FormData,t.journey)o.append(data,t.journey[data]);return e.prev=5,e.next=8,t.$axios.$post("/v1/artist/journey/",o,n);case 8:e.sent,t.$store.dispatch("check_user_journey"),t.refresh(),t.progressbar=!1,t.snackbar=!0,t.$router.push("/"+t.$store.state.auth.user.user.username+"/journey"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),his.progressbar=!1,console.log(e.t0);case 20:e.next=23;break;case 22:t.valid_snackbar=!0;case 23:case"end":return e.stop()}}),e,null,[[5,16]])})))()},update:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,c,v,h,i,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.progressbar=!0,n={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+t.$store.state.auth.user.access_token}},o=t.editing_obj,r=t.journey,l=Object.keys(o),c=Object.keys(r),v=Object.values(o),h=Object.values(r),e.prev=8,i=0;case 10:if(!(i<l.length)){e.next=25;break}if(l[i]!=c[i]||v[i]!=h[i]){e.next=15;break}console.log(" value not changed for: ",l[i]+" -> "+h[i]),e.next=22;break;case 15:return(d=new FormData).append(l[i],h[i]),d.append("id",t.journey.id),console.log("key obj1: "+l[i]+"\nkeyobj2: "+c[i]+"\n myObj1 value: "+v[i]+"\nmyObj2 value: "+h[i]+"\n"),e.next=21,t.$axios.$patch("/v1/artist/journey/"+t.editing_obj.id,d,n);case 21:console.log(h[i]," changed");case 22:i++,e.next=10;break;case 25:t.$store.dispatch("check_user_journey"),t.$store.dispatch("remove_editing_obj"),t.refresh(),t.progressbar=!1,t.snackbar=!0,e.next=36;break;case 32:e.prev=32,e.t0=e.catch(8),console.log("error",e.t0),t.progressbar=!1;case 36:t.$router.push("/"+t.$store.state.auth.user.user.username+"/journey");case 37:case"end":return e.stop()}}),e,null,[[8,32]])})))()}}},d=n(21),m=n(24),j=n.n(m),_=n(353),f=n(343),y=n(348),k=n(349),x=n(522),w=n(98),D=n(222),C=n(341),$=n(461),O=n(462),S=n(352),I=n(553),V=n(554),P=n(376),R=n(351),F=n(475),T=n(476),A=n(477),z=n(366),E=n(384),L=n(432),component=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-container",{staticClass:"ma-24"},[n("div",{staticClass:"text-xs-center mb-6",attrs:{align:"center"}},[n("v-btn",{staticClass:"elevation-0 white text-decoration-none float-left",attrs:{icon:""},on:{click:function(e){return t.goback()}}},[n("v-icon",[t._v("mdi-arrow-left")])],1)],1),t._v(" "),n("v-row",{staticClass:"mx-2"},[n("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"6"}},[n("h3",{staticClass:"ma-4"},[t._v("Share your journey")]),t._v(" "),n("v-stepper",{attrs:{vertical:""},model:{value:t.e6,callback:function(e){t.e6=e},expression:"e6"}},[n("v-stepper-step",{attrs:{complete:t.e6>1,step:"1"}},[t._v("\n                Share images* \n                ")]),t._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"1",width:"100%"}},[n("v-slide-group",{staticClass:"py-4 ma-0",attrs:{"min-width":"2px","show-arrows":""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("v-slide-item",[n("div",{staticClass:" rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:t.imageData1,height:"150px",width:"150px"}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(e){return t.onPick(1)}}},[t._v("mdi-image-plus")])],1),t._v(" "),n("input",{ref:"fileInput1",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:t.onFileChange1}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.removeImage(1)}}},[t._v("mdi-delete-outline")])],1)],1)]),t._v(" "),t.imageData1?n("v-slide-item",[n("div",{staticClass:"mx-2 rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:t.imageData2,height:"150px",width:"150px"}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(e){return t.onPick(2)}}},[t._v("mdi-image-plus")])],1),t._v(" "),n("input",{ref:"fileInput2",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:t.onFileChange2}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.removeImage(2)}}},[t._v("mdi-delete-outline")])],1)],1)]):t._e(),t._v(" "),t.imageData2?n("v-slide-item",[n("div",{staticClass:"mx-2 rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:t.imageData3,height:"150px",width:"150px"}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(e){return t.onPick(3)}}},[t._v("mdi-image-plus")])],1),t._v(" "),n("input",{ref:"fileInput3",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:t.onFileChange3}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.removeImage(3)}}},[t._v("mdi-delete-outline")])],1)],1)]):t._e(),t._v(" "),t.imageData3?n("v-slide-item",[n("div",{staticClass:"mx-2 rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:t.imageData4,height:"150px",width:"150px"}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(e){return t.onPick(4)}}},[t._v("mdi-image-plus")])],1),t._v(" "),n("input",{ref:"fileInput4",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:t.onFileChange4}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.removeImage(4)}}},[t._v("mdi-delete-outline")])],1)],1)]):t._e(),t._v(" "),t.imageData4?n("v-slide-item",[n("div",{staticClass:"mx-2 rounded-lg grey lighten-4"},[n("v-img",{attrs:{src:t.imageData5,height:"150px",width:"150px"}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"indigo",small:""},on:{click:function(e){return t.onPick(5)}}},[t._v("mdi-image-plus")])],1),t._v(" "),n("input",{ref:"fileInput5",staticStyle:{display:"none"},attrs:{type:"file",name:"gallery",accept:"image/*",required:""},on:{change:t.onFileChange5}}),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.removeImage(5)}}},[t._v("mdi-delete-outline")])],1)],1)]):t._e()],1),t._v(" "),n("v-btn",{attrs:{color:"indigo",text:"",outlined:""},on:{click:function(e){t.e6=2}}},[t._v("Continue")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.goback}},[t._v("Cancel")])],1),t._v(" "),n("v-stepper-step",{attrs:{complete:t.e6>2,step:"2"}},[t._v("Caption")]),t._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"2"}},[n("v-text-field",{attrs:{label:"Title*",rules:[function(){return!!t.journey.joevent||"This field is required"}],maxlength:50},model:{value:t.journey.joevent,callback:function(e){t.$set(t.journey,"joevent",e)},expression:"journey.joevent"}}),t._v(" "),n("v-textarea",{attrs:{label:"Caption"},model:{value:t.journey.jocontent,callback:function(e){t.$set(t.journey,"jocontent",e)},expression:"journey.jocontent"}}),t._v(" "),n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.journey.jodate,callback:function(e){t.$set(t.journey,"jodate",e)},expression:"journey.jodate"}},"v-text-field",r,!1),o))]}}])},[t._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.journey.jodate,callback:function(e){t.$set(t.journey,"jodate",e)},expression:"journey.jodate"}},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:"",color:"indigo"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),t._v(" "),n("v-btn",{attrs:{text:"",color:"indigo"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1),t._v(" "),n("v-text-field",{attrs:{"error-messages":t.linkError,label:"Add a link",maxlength:50},on:{change:t.checkLink},model:{value:t.journey.jolink,callback:function(e){t.$set(t.journey,"jolink",e)},expression:"journey.jolink"}}),t._v(" "),n("v-btn",{attrs:{color:"indigo",text:"",outlined:""},on:{click:function(e){t.e6=3}}},[t._v("Continue")]),t._v(" "),n("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(e){t.e6=1}}},[t._v("Previous")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.goback}},[t._v("Cancel")])],1),t._v(" "),n("v-stepper-step",{attrs:{complete:t.e6>3,step:"3"}},[t._v("Privacy")]),t._v(" "),n("v-stepper-content",{staticClass:"ma-0",attrs:{step:"3"}},[n("h4",{staticClass:"font-weight-light"},[t._v("Add to highlights")]),t._v(" "),n("v-radio-group",{attrs:{row:""},model:{value:t.journey.ishighlight,callback:function(e){t.$set(t.journey,"ishighlight",e)},expression:"journey.ishighlight"}},[n("v-radio",{attrs:{label:"Yes",value:!0}}),t._v(" "),n("v-radio",{attrs:{label:"No",value:!1}})],1),t._v(" "),n("h4",{staticClass:"font-weight-light"},[t._v("Do you want to keep it private?")]),t._v(" "),n("v-radio-group",{attrs:{row:""},model:{value:t.journey.isprivate,callback:function(e){t.$set(t.journey,"isprivate",e)},expression:"journey.isprivate"}},[n("v-radio",{attrs:{label:"Yes",value:!0}}),t._v(" "),n("v-radio",{attrs:{label:"No",value:!1}})],1),t._v(" "),t.editing_obj?n("v-btn",{staticClass:"text-decoration-none",attrs:{outlined:"",small:"",color:"indigo",dark:"",loading:t.progressbar},on:{click:t.update}},[t._v("Update")]):n("v-btn",{staticClass:"text-decoration-none",attrs:{outlined:"",small:"",color:"indigo",dark:"",loading:t.progressbar},on:{click:t.submit}},[t._v("Submit")]),t._v(" "),n("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(e){t.e6=2}}},[t._v("Previous")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.goback}},[t._v("Cancel")])],1)],1)],1),t._v(" "),n("v-col",{staticClass:"px-sm-8 lighten-4 rounded-xl",attrs:{cols:"12",md:"6"}},[n("h3",{staticClass:"ma-4"},[t._v("Preview your journey")]),t._v("\n            "+t._s(t.editing_obj)+"\n            "+t._s(t.journey)+"\n            "),t.journey.jodate?n("v-row",{staticClass:"pb-2"},[n("caption",{staticClass:"ma-6"},[t._v(t._s(t.journey.jodate)+" ")])]):t._e(),t._v(" "),t.journey.joevent?n("v-row",{staticClass:"pb-6 justify-center text-center"},[n("h3",{staticClass:"text-center"},[t._v(t._s(t.journey.joevent)+" ")])]):t._e(),t._v(" "),n("client-only",[t.imageData1?n("Slider",{attrs:{autoplay:!1,width:"520px",height:"500px"}},[t.imageData1?n("div",[n("SliderItem",[n("v-img",{attrs:{src:t.imageData1,contain:"",height:"500px",width:"800px"}})],1)],1):t._e(),t._v(" "),t.imageData2?n("div",[n("SliderItem",[n("v-img",{attrs:{src:t.imageData2,contain:"",height:"500px",width:"800px"}})],1)],1):t._e(),t._v(" "),t.imageData3?n("div",[n("SliderItem",[n("v-img",{attrs:{src:t.imageData3,contain:"",height:"500px",width:"800px"}})],1)],1):t._e(),t._v(" "),t.imageData4?n("div",[n("SliderItem",[n("v-img",{attrs:{src:t.imageData4,contain:"",height:"500px",width:"800px"}})],1)],1):t._e(),t._v(" "),t.imageData5?n("div",[n("SliderItem",[n("v-img",{attrs:{src:t.imageData5,contain:"",height:"500px",width:"800px"}})],1)],1):t._e()]):t._e()],1),t._v(" "),t.journey.jocontent?n("v-row",{staticClass:"pb-6 pt-4 justify-center text-center"},[n("h4",{staticClass:" text-center"},[t._v(" "+t._s(t.journey.username)+": "+t._s(t.journey.jocontent)+" ")])]):t._e(),t._v(" "),t.journey.jolink?n("v-row",{staticClass:"pb-6 justify-center text-center"},[t.journey.jolink?n("v-btn",{attrs:{icon:"",color:"indigo"},on:{click:t.openlink}},[n("v-icon",[t._v("mdi-link")])],1):t._e(),t._v(" "),t.journey.ishighlight?n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),o),[n("v-icon",{staticClass:"pl-2 float-right",attrs:{yellow:"",small:""}},[t._v("mdi-star")])],1)]}}],null,!1,930810606)},[t._v(" "),n("span",[t._v("This is a highlighted post.")])]):t._e(),t._v(" "),t.journey.isprivate?n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),o),[n("v-icon",{staticClass:"pl-2 float-right",attrs:{small:""}},[t._v("mdi-lock")])],1)]}}],null,!1,976522787)},[t._v(" "),n("span",[t._v("This is your private post.")])]):t._e()],1):t._e()],1)],1),t._v(" "),n("v-snackbar",{model:{value:t.valid_snackbar,callback:function(e){t.valid_snackbar=e},expression:"valid_snackbar"}},[t._v("\n            Please fill the required details.\n        ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;j()(component,{VApp:_.a,VBtn:f.a,VCol:y.a,VContainer:k.a,VDatePicker:x.a,VIcon:w.a,VImg:D.a,VMenu:C.a,VRadio:$.a,VRadioGroup:O.a,VRow:S.a,VSlideGroup:I.a,VSlideItem:V.a,VSnackbar:P.a,VSpacer:R.a,VStepper:F.a,VStepperContent:T.a,VStepperStep:A.a,VTextField:z.a,VTextarea:E.a,VTooltip:L.a})}}]);